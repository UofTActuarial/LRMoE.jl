<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Data Formatting · LRMoE.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">LRMoE.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Overview</a></li><li><a class="tocitem" href="../framework/">Modelling Framework</a></li><li><a class="tocitem" href="../experts/">Expert Functions</a></li><li><a class="tocitem" href="../init/">Model Initialization</a></li><li><a class="tocitem" href="../fit/">Fitting Function</a></li><li><a class="tocitem" href="../predictive/">Predictive Functions</a></li><li><span class="tocitem">Examples &amp; Tutorials</span><ul><li><a class="tocitem" href="../examples/sim_data/simulate_data/">Data Simulation</a></li><li class="is-active"><a class="tocitem" href>Data Formatting</a><ul class="internal"><li><a class="tocitem" href="#Data-Formatting"><span>Data Formatting</span></a></li></ul></li><li><a class="tocitem" href="../examples/sim_fit/simulate_fit/">Fitting Function</a></li><li><a class="tocitem" href="../customize/">Adding Customized Expert Functions</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples &amp; Tutorials</a></li><li class="is-active"><a href>Data Formatting</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Data Formatting</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/sparktseung/LRMoE.jl/blob/master/docs/src/data_format.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="Data-Formatting"><a class="docs-heading-anchor" href="#Data-Formatting">Data Formatting</a><a id="Data-Formatting-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Formatting" title="Permalink"></a></h2><p>There are a few data formatting issues to note when using the <strong>LRMoE</strong> package, which are summarized below. Throughout this page, we assume there are <code>N = 100</code> insurance policyholders,  who have two coverages <code>y_1</code> and <code>y_2</code> (dimension of response <code>D = 2</code>). Each policyholder has 5 covariates (number of covariates <code>P = 5</code>).</p><ul><li><p>Covariate <code>X</code>: The dimension of <code>X</code> should be 100 by 5 (<code>= N * P</code>), which is relatively straightforward.   If there are factor covariates (e.g. indicators for urban and rural region), the intercept term should    be manually added, and the user needs to manually augment a column of zero-one indicator.</p></li><li><p>Response <code>Y</code> (Exact Case): If both <code>y_1</code> and <code>y_2</code> are observed exactly (i.e. the incurred losses are not   censored or truncated), then we can set <code>exact_Y = true</code> in the initialization and fitting function.   In this case, the dimension of <code>Y</code> should be 100 by 2 (<code>= N * D</code>): the first column is for <code>y_1</code> and   the second for <code>y_2</code>.</p></li><li><p>Response <code>Y</code> (Not Exact Case): If either <code>y_1</code> or <code>y_2</code> is not observed exactly, then <code>exact_Y = false</code> and   the dimension of <code>Y</code> should be 100 by 8 (<code>= N * 4D</code>): the first four columns are for <code>y_1</code> and the   remaining for <code>y_2</code>. For each block of 4 columns, they should be structured as (<code>tl</code>, <code>yl</code>, <code>yu</code>, <code>tu</code>),   corresponding to the lower bound of truncation, lower bound of censoring, upper bound of censoring and   upper bound of truncation, respectively. Some typical cases are listed below:</p><ul><li>Both <code>y_1</code> and <code>y_2</code> are observed exactly: Assume <code>y_1 = 2.0</code> and <code>y_2 = 3.0</code>, then the first row of <code>Y</code>   should be <code>[0.0 2.0 2.0 Inf 0.0 3.0 3.0 Inf]</code>. Alternatively, we can set <code>exact_Y = true</code> (see the    previous case), and also set the first row of <code>Y</code> as <code>[2.0 3.0]</code>.</li><li><code>y_1</code> is observed exactly, <code>y_2</code> is left-truncated at <code>1.0</code> but observed exactly (e.g. an insurance deductible):   Assume <code>y_1 = 2.0</code> and <code>y_2 = 3.0</code>, then the first row of <code>Y</code> should be <code>[0.0 2.0 2.0 Inf 1.0 3.0 3.0 Inf]</code>.</li><li><code>y_1</code> is observed exactly, <code>y_2</code> is right-censored at <code>2.0</code> (e.g. a payment limit):   Assume <code>y_1 = 2.0</code> and <code>y_2 = 3.0</code>, then the first row of <code>Y</code> should be <code>[0.0 2.0 2.0 Inf 0.0 2.0 Inf Inf]</code>.</li><li><code>y_1</code> is observed exactly, <code>y_2</code> is only observed within a range:   Assume <code>y_1 = 2.0</code> and <code>y_2 = 3.0</code>, but we only observe <code>2.5 &lt; y_2 &lt; 3.5</code>,   then the first row of <code>Y</code> should be <code>[0.0 2.0 2.0 Inf 0.0 2.5 3.5 Inf]</code>.</li></ul></li><li><p>Logit Regression Coefficients <code>α</code>: Assume we would like to fit an LRMoE with three latent classes (<code>g = 3</code>), then   the dimension of <code>α</code> should be 5 by 3 (<code>= N * g</code>). For example, a noninformative guess can be    initialized as <code>α = fill(0.0, 5, 3)</code>.</p></li><li><p>Component Distribution <code>comp_dist</code>: Assume we would like to fit an LRMoE with three lateht classes (<code>g = 3</code>), then   the dimension of <code>comp_dist</code> should be 2 by 3 (<code>= D * g</code>). For example, if we assume <code>y_1</code> is a mixture of lognormals   and <code>y_2</code> is a mixture of gammas, then <code>comp_dist = [LogNormalExpert(1.0, 2.0) LogNormalExpert(1.5, 2.5) LogNormalExpert(2.0, 3.0); GammaExpert(1.0, 2.0) GammaExpert(1.5, 2.5) GammaExpert(2.0, 3.0)]</code>. Note that the columns of <code>comp_dist</code> should be   distinct, otherwise the model is not identifiable.</p></li><li><p>Penalty on Logit Regression Coefficients <code>pen_α</code>: It should be a single number (i.e. a uniform penalty imposed on    all coefficients in <code>α</code>). For example, when <code>pen_α = 2.0</code>, then the penalty <code>sum( (α ./ 2.0).^2 )</code> is subtracted   from the loglikelihood as a penalty. In other words, we would not like the magnitude of <code>α</code> to be too large.</p></li><li><p>Penalty on Parameters of Expert Functions <code>pen_params</code>: Using the <code>comp_dist</code> mentioned above, <code>pen_params</code> should be   a matrix of size 2 by 3 (<code>= D * g</code>), where each entry is a vector of real numbers penalizing the parameters of   expert functions. Usually, the user can leave this argument as default. For more details, the user is referred to the package source code.</p></li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../examples/sim_data/simulate_data/">« Data Simulation</a><a class="docs-footer-nextpage" href="../examples/sim_fit/simulate_fit/">Fitting Function »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 4 May 2021 15:41">Tuesday 4 May 2021</span>. Using Julia version 1.4.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
